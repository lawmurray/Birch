##
## @file
##

# compile and link flags
ACLOCAL_AMFLAGS = -I m4
AM_CXXFLAGS = -include precompile.hpp

if ENABLE_STD
BIRCHFLAGS = --enable-std
else
BIRCHFLAGS = --disable-std
endif

# pattern for *.bi files
%.cpp %.hpp: %.bi $(BIRCHC)
	$(BIRCHC) $(BIRCHFLAGS) $(CPPFLAGS) -o $@ $<

# precompile the Birch compiler library header
precompile.hpp.pch: precompile.hpp
	$(CXX) $(DEFS) -std=c++14 precompile.hpp -o precompile.hpp.pch

BUILT_SOURCES = precompile.hpp.pch
CLEANFILES = precompile.hpp.pch
