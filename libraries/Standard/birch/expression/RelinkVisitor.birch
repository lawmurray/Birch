/**
 * Count arguments of a delayed expression.
 */
final class RelinkVisitor {
  /**
   * Number of arguments.
   */
  n:Integer <- 0;

  function visit(p:Distribution<Real>) {
    p.offset <- n;
    n <- n + 1;
  }

  function visit(p:Distribution<Real[_]>) {
    p.offset <- n;
    n <- n + size(p.x!);
  }

  function visit(p:Distribution<Real[_,_]>) {
    p.offset <- n;
    n <- n + size(p.x!);
  }

  function visit<Value>(p:Distribution<Value>) {
    // ignore
  }
}
